<div class="min-h-screen bg-gray-50">
  <!-- Page Header with gradient background -->
  <app-page-header [height]="'short'">
    <div class="flex items-center justify-between w-full">
      <h1 class="text-3xl font-semibold text-white">Accounts</h1>
      <button hlmBtn variant="outline" class="bg-white/10 backdrop-blur border-white/20 text-white hover:bg-white/20 text-sm font-medium">
        MANAGE ACCOUNT GROUPS
      </button>
    </div>
  </app-page-header>
  
  <!-- Content Container -->
  <div class="container mx-auto px-6 -mt-16 pb-8">
    <!-- Action Bar Widget -->
    <app-accounts-action-bar-widget
      [asOfDate]="asOfDate"
      (apply)="applyFilters()"
      (clear)="clearFilters()"
      class="block mb-5"
    ></app-accounts-action-bar-widget>
    
    <!-- Summary Widget -->
    <app-accounts-summary-widget
      [totalMarketValue]="totalMarketValue"
      [totalCost]="totalCost"
      [unrealizedGL]="unrealizedGL"
      [asOfDate]="asOfDate"
      class="block mb-6"
    ></app-accounts-summary-widget>
    
    <!-- Table Widget -->
    <app-accounts-table-widget
      [accounts]="accounts"
      [columns]="columns"
      [tableConfig]="tableConfig"
      [selectedQuery]="selectedQuery"
      (tabChange)="onTabChange($event)"
      (queryChange)="selectedQuery = $event; applyFilters()"
      (export)="exportData()"
      (editColumns)="editColumns()"
      (rowClick)="onRowClick($event)"
      (actionClick)="onAction($event)"
    >
      <!-- Custom unrealized G/L column template -->
      <ng-template #unrealizedGLTemplate let-row="row">
        <div class="flex items-center justify-end gap-2">
          <span [class.text-green-600]="row.unrealizedGLDirection === 'up'"
                [class.text-red-600]="row.unrealizedGLDirection === 'down'">
            {{ row.unrealizedGL | currency:'USD':'symbol':'1.2-2' }}
          </span>
          <div 
            class="w-5 h-5 rounded flex items-center justify-center"
            [ngClass]="{
              'bg-green-100': row.unrealizedGLDirection === 'up',
              'bg-red-100': row.unrealizedGLDirection === 'down'
            }"
          >
            <ng-icon 
              [name]="row.unrealizedGLDirection === 'up' ? 'lucideChevronUp' : 'lucideChevronDown'" 
              size="12"
              [class]="row.unrealizedGLDirection === 'up' ? 'text-green-600' : 'text-red-600'"
            />
          </div>
        </div>
      </ng-template>
      
      <!-- Action column template -->
      <ng-template #actions let-row="row">
        <button 
          hlmBtn 
          variant="ghost" 
          size="sm"
          class="border border-gray-300 hover:bg-gray-50 p-1.5"
          (click)="onAction({action: 'view', row: row}); $event.stopPropagation()"
        >
          <ng-icon name="lucideEye" size="16" class="text-gray-600" />
        </button>
      </ng-template>
    </app-accounts-table-widget>
  </div>
</div>